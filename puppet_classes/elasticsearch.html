<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Puppet Class: elasticsearch
  
    &mdash; Documentation by YARD 0.9.14
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_classes::elasticsearch";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (e)</a> &raquo;
    <span class='title'><span class='object_link'>Puppet Classes</span></span>
     &raquo; 
    <span class="title">elasticsearch</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Puppet Class: elasticsearch</h1>
<div class="box_info">
  
  
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/init.pp
    </dd>
  </dl>
</div>

  <h2>Summary</h2>
  Manages the installation of Elasticsearch and related options.

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    
<p>Top-level Elasticsearch class which may manage installation of the
Elasticsearch package, package repository, and other global options and
parameters.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'>
<p>install Elasticsearch</p>
</div></p>
      
      <pre class="example code"><code>class { &#39;elasticsearch&#39;: }</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>removal and decommissioning</p>
</div></p>
      
      <pre class="example code"><code>class { &#39;elasticsearch&#39;:
  ensure =&gt; &#39;absent&#39;,
}</code></pre>
    
      
        <p class="example_title"><div class='inline'>
<p>install everything but disable service(s) afterwards</p>
</div></p>
      
      <pre class="example code"><code>class { &#39;elasticsearch&#39;:
  status =&gt; &#39;disabled&#39;,
}</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ensure</span>
      
      
        <span class='type'>(<tt>Enum['absent', 'present']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Controls if the managed resources shall be <code>present</code> or
<code>absent</code>. If set to <code>absent</code>, the managed software
packages will be uninstalled, and any traces of the packages will be purged
as well as possible, possibly including existing configuration files.
System modifications (if any) will be reverted as well as possible (e.g.
removal of created users, services, changed log settings, and so on). This
is a destructive parameter and should be used with care.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_basic_auth_password</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Defines the default REST basic auth password for API authentication.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_basic_auth_username</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Defines the default REST basic auth username for API authentication.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_ca_file</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Path to a CA file which will be used to validate server certs when
communicating with the Elasticsearch API over HTTPS.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_ca_path</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Path to a directory with CA files which will be used to validate server
certs when communicating with the Elasticsearch API over HTTPS.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_host</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default host to use when accessing Elasticsearch APIs.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_port</span>
      
      
        <span class='type'>(<tt>Integer[0, 65535]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default port to use when accessing Elasticsearch APIs.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_protocol</span>
      
      
        <span class='type'>(<tt>Enum['http', 'https']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default protocol to use when accessing Elasticsearch APIs.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>api_timeout</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default timeout (in seconds) to use when accessing Elasticsearch APIs.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>autoupgrade</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>If set to <code>true</code>, any managed package will be upgraded on each
Puppet run when the package provider is able to find a newer version than
the present one. The exact behavior is provider dependent (see <a
href="http://j.mp/xbxmNP">package, “upgradeable”</a> in the Puppet
documentation).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>config</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Elasticsearch configuration hash.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>configdir</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Directory containing the elasticsearch configuration. Use this setting if
your packages deviate from the norm (<code>/etc/elasticsearch</code>)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>daily_rolling_date_pattern</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>File pattern for the file appender log when file_rolling_type is
&#39;dailyRollingFile&#39;.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>datadir</span>
      
      
        <span class='type'>(<tt>Elasticsearch::Multipath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Allows you to set the data directory of Elasticsearch.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>datadir_instance_directories</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Control whether individual directories for instances will be created within
each instance&#39;s data directory.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>default_logging_level</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Default logging level for Elasticsearch.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>defaults_location</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Absolute path to directory containing init defaults file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>download_tool</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Command-line invocation with which to retrieve an optional package_url.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>elasticsearch_group</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The group Elasticsearch should run as. This also sets file group
permissions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>elasticsearch_user</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The user Elasticsearch should run as. This also sets file ownership.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>file_rolling_type</span>
      
      
        <span class='type'>(<tt>Enum['dailyRollingFile', 'rollingFile', 'file']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Configuration for the file appender rotation. It can be
&#39;dailyRollingFile&#39;, &#39;rollingFile&#39; or &#39;file&#39;. The
first rotates by name, the second one by size or third don&#39;t rotate
automatically.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>homedir</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Directory where the elasticsearch installation&#39;s files are kept
(plugins, etc.)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>indices</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define indices via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>init_defaults</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Defaults file content in hash representation.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>init_defaults_file</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Defaults file as puppet resource.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>init_template</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Service file as a template.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>instances</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define instances via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>jvm_options</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Array of options to set in jvm_options.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>license</span>
      
      
        <span class='type'>(<tt>Optional[Variant[String, Hash]]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Optional Elasticsearch license in hash or string form.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>logdir</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Directory that will be used for Elasticsearch logging.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>logging_config</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Representation of information to be included in the logging.yml file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>logging_file</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Instead of a hash, you may supply a <code>puppet://</code> file source for
the logging.yml file.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>logging_template</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Use a custom logging template - just supply the relative path, i.e.
<code>$module/elasticsearch/logging.yml.erb</code></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>manage_repo</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Enable repo management by enabling official Elastic repositories.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>oss</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether to use the purely open source Elasticsearch package distribution.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_dir</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Directory where packages are downloaded to.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_dl_timeout</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>For http, https, and ftp downloads, you may set how long the exec resource
may take.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Name Of the package to install.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_provider</span>
      
      
        <span class='type'>(<tt>Enum['<span class='object_link'><a href="elasticsearch_3A_3Apackage.html" title="puppet_classes::elasticsearch::package (puppet_class)">package</a></span>']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Method to install the packages, currently only <code>package</code> is
supported.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>package_url</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>URL of the package to download. This can be an http, https, or ftp resource
for remote packages, or a <code>puppet://</code> resource or
<code>file:/</code> for local packages</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pid_dir</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::Absolutepath]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Directory where the elasticsearch process should write out its PID.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>pipelines</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define pipelines via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>plugindir</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Directory containing elasticsearch plugins. Use this setting if your
packages deviate from the norm (/usr/share/elasticsearch/plugins)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>plugins</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define plugins via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>proxy_url</span>
      
      
        <span class='type'>(<tt>Optional[Stdlib::HTTPUrl]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>For http and https downloads, you may set a proxy server to use. By
default, no proxy is used. Format:
<code>proto://[user:pass@]server[:port]/</code></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>purge_configdir</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Purge the config directory of any unmanaged files.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>purge_package_dir</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Purge package directory on removal</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>purge_secrets</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Whether or not keys present in the keystore will be removed if they are not
present in the specified secrets hash.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>repo_stage</span>
      
      
        <span class='type'>(<tt>Variant[Boolean, String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Use stdlib stage setup for managing the repo instead of relationship
ordering.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>restart_on_change</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Determines if the application should be automatically restarted whenever
the configuration, package, or plugins change. Enabling this setting will
cause Elasticsearch to restart whenever there is cause to re-read
configuration files, load new plugins, or start the service using an
updated/changed executable. This may be undesireable in highly available
environments. If all other restart<em>* parameters are left unset, the
value of <code>restart_on_change</code> is used for all other
restart</em>*_change defaults.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>restart_config_change</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$restart_on_change</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Determines if the application should be automatically restarted whenever
the configuration changes. This includes the Elasticsearch configuration
file, any service files, and defaults files. Disabling automatic restarts
on config changes may be desired in an environment where you need to ensure
restarts occur in a controlled/rolling manner rather than during a Puppet
run.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>restart_package_change</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$restart_on_change</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Determines if the application should be automatically restarted whenever
the package (or package version) for Elasticsearch changes. Disabling
automatic restarts on package changes may be desired in an environment
where you need to ensure restarts occur in a controlled/rolling manner
rather than during a Puppet run.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>restart_plugin_change</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$restart_on_change</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Determines if the application should be automatically restarted whenever
plugins are installed or removed. Disabling automatic restarts on plugin
changes may be desired in an environment where you need to ensure restarts
occur in a controlled/rolling manner rather than during a Puppet run.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>roles</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define roles via a hash. This is mainly used with Hiera&#39;s auto binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rolling_file_max_backup_index</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Max number of logs to store whern file_rolling_type is
&#39;rollingFile&#39;</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>rolling_file_max_file_size</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Max log file size when file_rolling_type is &#39;rollingFile&#39;</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>scripts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define scripts via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>secrets</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Optional default configuration hash of key/value pairs to store in the
Elasticsearch keystore file. If unset, the keystore is left unmanaged.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>security_logging_content</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>File content for shield/x-pack logging configuration file (will be placed
into logging.yml or log4j2.properties file as appropriate).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>security_logging_source</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>File source for shield/x-pack logging configuration file (will be placed
into logging.yml or log4j2.properties file as appropriate).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>security_plugin</span>
      
      
        <span class='type'>(<tt>Optional[Enum['shield', 'x-pack']]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Which security plugin will be used to manage users, roles, and
certificates.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>service_provider</span>
      
      
        <span class='type'>(<tt>Enum['init', 'openbsd', 'openrc', 'systemd']</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The service resource type provider to use when managing elasticsearch
instances.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>snapshot_repositories</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define snapshot repositories via a hash. This is mainly used with
Hiera&#39;s auto binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>status</span>
      
      
        <span class='type'>(<tt>Elasticsearch::Status</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>To define the status of the service. If set to <code>enabled</code>, the
service will be run and will be started at boot time. If set to
<code>disabled</code>, the service is stopped and will not be started at
boot time. If set to <code>running</code>, the service will be run but will
not be started at boot time. You may use this to start a service on the
first Puppet run instead of the system startup. If set to
<code>unmanaged</code>, the service will not be started at boot time and
Puppet does not care whether the service is running or not. For example,
this may be useful if a cluster management software is used to decide when
to start the service plus assuring it is running on the desired node.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>system_key</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Source for the Shield/x-pack system key. Valid values are any that are
supported for the file resource <code>source</code> parameter.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>systemd_service_path</span>
      
      
        <span class='type'>(<tt>Stdlib::Absolutepath</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Path to the directory in which to install systemd service units.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>templates</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define templates via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>users</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Define templates via a hash. This is mainly used with Hiera&#39;s auto
binding.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>validate_tls</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Enable TLS/SSL validation on API calls.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>version</span>
      
      
        <span class='type'>(<tt>Variant[String, Boolean]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>To set the specific version you want to install.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Richard Pijnenburg <a
href="mailto:richard.pijnenburg@elasticsearch.com">richard.pijnenburg@elasticsearch.com</a></p>
</div>
      
    </li>
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>Tyler Langlois <a
href="mailto:tyler.langlois@elastic.co">tyler.langlois@elastic.co</a></p>
</div>
      
    </li>
  
</ul>

</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/init.pp', line 291</span>

class elasticsearch (
  Enum[&#39;absent&#39;, &#39;present&#39;]                       $ensure,
  Optional[String]                                $api_basic_auth_password,
  Optional[String]                                $api_basic_auth_username,
  Optional[String]                                $api_ca_file,
  Optional[String]                                $api_ca_path,
  String                                          $api_host,
  Integer[0, 65535]                               $api_port,
  Enum[&#39;http&#39;, &#39;https&#39;]                           $api_protocol,
  Integer                                         $api_timeout,
  Boolean                                         $autoupgrade,
  Hash                                            $config,
  Stdlib::Absolutepath                            $configdir,
  String                                          $daily_rolling_date_pattern,
  Elasticsearch::Multipath                        $datadir,
  Boolean                                         $datadir_instance_directories,
  String                                          $default_logging_level,
  Optional[Stdlib::Absolutepath]                  $defaults_location,
  Optional[String]                                $download_tool,
  String                                          $elasticsearch_group,
  String                                          $elasticsearch_user,
  Enum[&#39;dailyRollingFile&#39;, &#39;rollingFile&#39;, &#39;file&#39;] $file_rolling_type,
  Stdlib::Absolutepath                            $homedir,
  Hash                                            $indices,
  Hash                                            $init_defaults,
  Optional[String]                                $init_defaults_file,
  String                                          $init_template,
  Hash                                            $instances,
  Array[String]                                   $jvm_options,
  Optional[Variant[String, Hash]]                 $license,
  Stdlib::Absolutepath                            $logdir,
  Hash                                            $logging_config,
  Optional[String]                                $logging_file,
  Optional[String]                                $logging_template,
  Boolean                                         $manage_repo,
  Boolean                                         $oss,
  Stdlib::Absolutepath                            $package_dir,
  Integer                                         $package_dl_timeout,
  String                                          $package_name,
  Enum[&#39;package&#39;]                                 $package_provider,
  Optional[String]                                $package_url,
  Optional[Stdlib::Absolutepath]                  $pid_dir,
  Hash                                            $pipelines,
  Stdlib::Absolutepath                            $plugindir,
  Hash                                            $plugins,
  Optional[Stdlib::HTTPUrl]                       $proxy_url,
  Boolean                                         $purge_configdir,
  Boolean                                         $purge_package_dir,
  Boolean                                         $purge_secrets,
  Variant[Boolean, String]                        $repo_stage,
  Boolean                                         $restart_on_change,
  Hash                                            $roles,
  Integer                                         $rolling_file_max_backup_index,
  String                                          $rolling_file_max_file_size,
  Hash                                            $scripts,
  Optional[Hash]                                  $secrets,
  Optional[String]                                $security_logging_content,
  Optional[String]                                $security_logging_source,
  Optional[Enum[&#39;shield&#39;, &#39;x-pack&#39;]]              $security_plugin,
  Enum[&#39;init&#39;, &#39;openbsd&#39;, &#39;openrc&#39;, &#39;systemd&#39;]    $service_provider,
  Hash                                            $snapshot_repositories,
  Elasticsearch::Status                           $status,
  Optional[String]                                $system_key,
  Stdlib::Absolutepath                            $systemd_service_path,
  Hash                                            $templates,
  Hash                                            $users,
  Boolean                                         $validate_tls,
  Variant[String, Boolean]                        $version,
  Boolean $restart_config_change  = $restart_on_change,
  Boolean $restart_package_change = $restart_on_change,
  Boolean $restart_plugin_change  = $restart_on_change,
) {

  #### Validate parameters

  if ($package_url != undef and $version != false) {
    fail(&#39;Unable to set the version number when using package_url option.&#39;)
  }

  if ($version != false) {
    case $facts[&#39;os&#39;][&#39;family&#39;] {
      &#39;RedHat&#39;, &#39;Linux&#39;, &#39;Suse&#39;: {
        if ($version =~ /.+-\d/) {
          $pkg_version = $version
        } else {
          $pkg_version = &quot;${version}-1&quot;
        }
      }
      default: {
        $pkg_version = $version
      }
    }
  }

  # This value serves as an unchanging default for platforms as a default for
  # init scripts to fallback on.
  $_datadir_default = $facts[&#39;kernel&#39;] ? {
    &#39;Linux&#39;   =&gt; &#39;/var/lib/elasticsearch&#39;,
    &#39;OpenBSD&#39; =&gt; &#39;/var/elasticsearch/data&#39;,
    default   =&gt; undef,
  }

  # The OSS package distribution&#39;s package appends `-oss` to the end of the
  # canonical package name.
  $_package_name = $oss ? {
    true    =&gt; &quot;${package_name}-oss&quot;,
    default =&gt; $package_name,
  }

  #### Manage actions

  contain elasticsearch::package
  contain elasticsearch::config

  create_resources(&#39;elasticsearch::index&#39;, $::elasticsearch::indices)
  create_resources(&#39;elasticsearch::instance&#39;, $::elasticsearch::instances)
  create_resources(&#39;elasticsearch::pipeline&#39;, $::elasticsearch::pipelines)
  create_resources(&#39;elasticsearch::plugin&#39;, $::elasticsearch::plugins)
  create_resources(&#39;elasticsearch::role&#39;, $::elasticsearch::roles)
  create_resources(&#39;elasticsearch::script&#39;, $::elasticsearch::scripts)
  create_resources(&#39;elasticsearch::snapshot_repository&#39;, $::elasticsearch::snapshot_repositories)
  create_resources(&#39;elasticsearch::template&#39;, $::elasticsearch::templates)
  create_resources(&#39;elasticsearch::user&#39;, $::elasticsearch::users)

  if ($manage_repo == true) {
    if ($repo_stage == false) {
      # Use normal relationship ordering
      contain elastic_stack::repo

      Class[&#39;elastic_stack::repo&#39;]
      -&gt; Class[&#39;elasticsearch::package&#39;]

    } else {
      # Use staging for ordering
      if !(defined(Stage[$repo_stage])) {
        stage { $repo_stage:  before =&gt; Stage[&#39;main&#39;] }
      }

      include elastic_stack::repo
      Class&lt;|title == &#39;elastic_stack::repo&#39;|&gt;{
        stage =&gt; $repo_stage,
      }
    }
  }

  if ($license != undef) {
    contain elasticsearch::license
  }

  #### Manage relationships
  #
  # Note that many of these overly verbose declarations work around
  # https://tickets.puppetlabs.com/browse/PUP-1410
  # which means clean arrow order chaining won&#39;t work if someone, say,
  # doesn&#39;t declare any plugins.
  #
  # forgive me for what you&#39;re about to see

  if defined(Class[&#39;java&#39;]) { Class[&#39;java&#39;] -&gt; Class[&#39;elasticsearch::config&#39;] }

  if $ensure == &#39;present&#39; {

    # Installation and configuration
    Class[&#39;elasticsearch::package&#39;]
    -&gt; Class[&#39;elasticsearch::config&#39;]

    # Top-level ordering bindings for resources.
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Plugin &lt;| ensure == &#39;present&#39; or ensure == &#39;installed&#39; |&gt;
    Elasticsearch::Plugin &lt;| ensure == &#39;absent&#39; |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Instance &lt;| |&gt;
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::User &lt;| |&gt;
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Role &lt;| |&gt;
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Template &lt;| |&gt;
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Pipeline &lt;| |&gt;
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Index &lt;| |&gt;
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Elasticsearch::Snapshot_repository &lt;| |&gt;

  } else {

    # Absent; remove configuration before the package.
    Class[&#39;elasticsearch::config&#39;]
    -&gt; Class[&#39;elasticsearch::package&#39;]

    # Top-level ordering bindings for resources.
    Elasticsearch::Plugin &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::Instance &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::User &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::Role &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::Template &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::Pipeline &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::Index &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]
    Elasticsearch::Snapshot_repository &lt;| |&gt;
    -&gt; Class[&#39;elasticsearch::config&#39;]

  }

  # Install plugins before managing instances or users/roles
  Elasticsearch::Plugin &lt;| ensure == &#39;present&#39; or ensure == &#39;installed&#39; |&gt;
  -&gt; Elasticsearch::Instance &lt;| |&gt;
  Elasticsearch::Plugin &lt;| ensure == &#39;present&#39; or ensure == &#39;installed&#39; |&gt;
  -&gt; Elasticsearch::User &lt;| |&gt;
  Elasticsearch::Plugin &lt;| ensure == &#39;present&#39; or ensure == &#39;installed&#39; |&gt;
  -&gt; Elasticsearch::Role &lt;| |&gt;

  # Remove plugins after managing users/roles
  Elasticsearch::User &lt;| |&gt;
  -&gt; Elasticsearch::Plugin &lt;| ensure == &#39;absent&#39; |&gt;
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::Plugin &lt;| ensure == &#39;absent&#39; |&gt;

  # Ensure roles are defined before managing users that reference roles
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::User &lt;| ensure == &#39;present&#39; |&gt;
  # Ensure users are removed before referenced roles are managed
  Elasticsearch::User &lt;| ensure == &#39;absent&#39; |&gt;
  -&gt; Elasticsearch::Role &lt;| |&gt;

  # Ensure users and roles are managed before calling out to REST resources
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::Template &lt;| |&gt;
  Elasticsearch::User &lt;| |&gt;
  -&gt; Elasticsearch::Template &lt;| |&gt;
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::Pipeline &lt;| |&gt;
  Elasticsearch::User &lt;| |&gt;
  -&gt; Elasticsearch::Pipeline &lt;| |&gt;
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::Index &lt;| |&gt;
  Elasticsearch::User &lt;| |&gt;
  -&gt; Elasticsearch::Index &lt;| |&gt;
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::Snapshot_repository &lt;| |&gt;
  Elasticsearch::User &lt;| |&gt;
  -&gt; Elasticsearch::Snapshot_repository &lt;| |&gt;

  # Ensure that any command-line based user changes are performed before the
  # file is modified
  Elasticsearch_user &lt;| |&gt;
  -&gt; Elasticsearch_user_file &lt;| |&gt;

  # Manage users/roles before instances (req&#39;d to keep dir in sync)
  Elasticsearch::Role &lt;| |&gt;
  -&gt; Elasticsearch::Instance &lt;| |&gt;
  Elasticsearch::User &lt;| |&gt;
  -&gt; Elasticsearch::Instance &lt;| |&gt;

  # Ensure instances are started before managing REST resources
  Elasticsearch::Instance &lt;| ensure == &#39;present&#39; |&gt;
  -&gt; Elasticsearch::Template &lt;| |&gt;
  Elasticsearch::Instance &lt;| ensure == &#39;present&#39; |&gt;
  -&gt; Elasticsearch::Pipeline &lt;| |&gt;
  Elasticsearch::Instance &lt;| ensure == &#39;present&#39; |&gt;
  -&gt; Elasticsearch::Index &lt;| |&gt;
  Elasticsearch::Instance &lt;| ensure == &#39;present&#39; |&gt;
  -&gt; Elasticsearch::Snapshot_repository &lt;| |&gt;
  # Ensure instances are stopped after managing REST resources
  Elasticsearch::Template &lt;| |&gt;
  -&gt; Elasticsearch::Instance &lt;| ensure == &#39;absent&#39; |&gt;
  Elasticsearch::Pipeline &lt;| |&gt;
  -&gt; Elasticsearch::Instance &lt;| ensure == &#39;absent&#39; |&gt;
  Elasticsearch::Index &lt;| |&gt;
  -&gt; Elasticsearch::Instance &lt;| ensure == &#39;absent&#39; |&gt;
  Elasticsearch::Snapshot_repository &lt;| |&gt;
  -&gt; Elasticsearch::Instance &lt;| ensure == &#39;absent&#39; |&gt;
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>